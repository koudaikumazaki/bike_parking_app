<% if flash[:notice] %>
  <div><%= flash[:notice] %></div>
<% end %>

<div class="text-center mx-auto ">
  <h2 class="text-2xl sm:text-3xl my-10 text-center">
    <%= @parking.name %>
  </h2>
  <ul class="flex text-center justify-center my-10">
    <li class="mx-5">
      <%= link_to edit_parking_path(@parking) do %>
        <span class="fas fa-edit fa-2x"></span>
      <% end %>
    </li>
    <li class="mx-5">
      <%= link_to @parking, data: { confirm: "本当に削除してもよろしいですか？" }, method: :delete do %>
        <span class="fas fa-trash-alt fa-2x"></span>
      <% end %>
    </li>
    <% if user_signed_in? %>
      <li id="favorites_buttons<%= @parking.id %>" class="mx-5">
        <%= render partial: 'favorites/favorite', locals: { parking: @parking, favorite: @favorite} %>
      </li>
    <% end %>
  </ul>
  <div id="map" class="my-5">
    <script>
      function initMap() {
          var test ={lat: <%= @parking.latitude %>, lng: <%= @parking.longitude %>};
          var map = new google.maps.Map(document.getElementById('map'), {
                    zoom: 15, 
                    center: test
                    });
          var transitLayer = new google.maps.TransitLayer();
          transitLayer.setMap(map);

          var contentString = '住所：<%= @parking.address %>';
          var infowindow = new google.maps.InfoWindow({
            content: contentString
          });

          var marker = new google.maps.Marker({
                        position:test,
                        map: map,
                        title: contentString
                      });

          marker.addListener('click', function() {
            infowindow.open(map, marker);
          });
        }
      </script>
      <script src="https://maps.googleapis.com/maps/api/js?key=<%= ENV['GOOGLE_API_KEY'] %>&callback=initMap" async defer></script>
  </div>
  <ul>
    <li class="my-5">所在地：<%= @parking.address %></li>
    <li class="my-5">駐輪料金：<%= @parking.fee %></li>
    <li class="my-5">収容台数：<%= @parking.capacity %></li>
    <li class="my-5">備考：<%= @parking.others %></li>
    <li class="my-5">投稿者：<%= @parking.user_id %></li>
  </ul>
</div>